<!-- Content -->
<div [style]="{ width: '99.9vw', height: '80.9vh' }">
  <div [style]="{backgoundColor: 'pink', width: '99.9vw', height: '80.9vh'}" (click)="closeAllModals()">
    <!-- Title -->
    <h1 [style]="{ marginLeft: '3em', pointerEvents: 'none'}" [ngClass]="'lyrics'">My List</h1>
    <!-- Container -->
    <div [id]="'container'" [style]="{display: 'flex', flexDirection: 'column', alignItems: 'center'}">
      <!-- Searchs options -->
      <div [style]="{display: 'flex', width: '80%',  marginBottom: '1.7rem', marginTop: '1rem'}">
        <mat-form-field class="example-form-field">
          <mat-label [style]="{fontSize: '1.2em'}" [ngClass]="'lyrics'">Search Product</mat-label>
          <input matInput (keyup)="applyFilter($event)" placeholder="" #input [(ngModel)]="valueFilterText">
          <button *ngIf="valueFilterText" matSuffix mat-icon-button aria-label="Clear"
            (click)="cleanInputFilter($event)">
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
        <!-- TODO: Mas adelante -->
        <!-- <mat-form-field>
        <mat-label [style]="{fontSize: '1.2em'}" [ngClass]="'lyrics'">Change Market</mat-label>
        <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Mia" #input>
      </mat-form-field> -->
      </div>
      <div [style]="{display: 'flex', justifyContent: 'center', marginBottom: '0.5em'}">
        <table mat-table [dataSource]="dataSource" matSort #empTbSort="matSort" [style]="{ backgroundColor: '#fafafa'}">
          <!-- Check Column -->
          <ng-container matColumnDef="check">
            <th mat-header-cell *matHeaderCellDef> </th>
            <td mat-cell *matCellDef="let row; let index = index;">
              <mat-checkbox (click)="checkChange($event, row.id)" [style]="{marginLeft: '1em'}"
                [(ngModel)]="row.isChecked"></mat-checkbox>
            </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="name">
            <th [ngClass]="'lyrics'" mat-header-cell *matHeaderCellDef mat-sort-header [style]="{fontSize: '1.2em'}">
              Name
            </th>
            <td (click)="showModalProductDetails($event , row)"
              [ngClass]="row.isChecked ? ['lyricsGetItem', 'getItem'] : ['lyrics']" mat-cell *matCellDef="let row">
              {{row.name}}
            </td>
          </ng-container>

          <!-- Category Column -->
          <ng-container matColumnDef="category">
            <th [ngClass]="'lyrics'" mat-header-cell *matHeaderCellDef mat-sort-header [style]="{fontSize: '1.2em'}">
              Category </th>
            <td (click)="showModalProductDetails($event, row)"
              [ngClass]="row.isChecked ? ['lyricsGetItem', 'getItem'] : ['lyrics']" mat-cell *matCellDef="let row">
              {{row.category}}
            </td>
          </ng-container>

          <!-- Brand Column -->
          <ng-container matColumnDef="brand">
            <th [ngClass]="'lyrics'" mat-header-cell *matHeaderCellDef mat-sort-header [style]="{fontSize: '1.2em'}">
              Brand </th>
            <td (click)="showModalProductDetails($event, row)"
              [ngClass]="row.isChecked ? ['lyricsGetItem', 'getItem'] : ['lyrics']" mat-cell *matCellDef="let row">
              {{row.brand}}
            </td>
          </ng-container>

          <!-- Price Column -->
          <ng-container matColumnDef="price">
            <th [ngClass]="'lyrics'" mat-header-cell *matHeaderCellDef mat-sort-header [style]="{fontSize: '1.2em'}">
              Price </th>
            <td (click)="showModalProductDetails($event, row)"
              [ngClass]="row.isChecked ? ['lyricsGetItem', 'getItem'] : ['lyrics']" mat-cell *matCellDef="let row">
              {{row.price}}
            </td>
          </ng-container>

          <!-- Units Column -->
          <ng-container matColumnDef="units">
            <th [ngClass]="'lyrics'" mat-header-cell *matHeaderCellDef mat-sort-header [style]="{fontSize: '1.2em'}">
              Unit/s </th>
            <td (click)="showModalProductDetails($event, row)"
              [ngClass]="row.isChecked ? ['lyricsGetItem', 'getItem'] : ['lyrics']" mat-cell *matCellDef="let row">
              {{row.units}}
            </td>
          </ng-container>

          <!-- Delete Column -->
          <ng-container matColumnDef="delete">
            <th [ngClass]="'lyrics'" mat-header-cell *matHeaderCellDef [style]="{ fontSize: '1.2em'}"></th>
            <td mat-cell *matCellDef="let row; let index = index;" class="status">
              <mat-icon (click)="showDeleleProductModal($event, row.isChecked, row.id)"
                [ngStyle]="row.isChecked ? {color: '#A2A2A2'} : {color: '#707070', cursor: 'pointer'}">
                {{row.delete}}
              </mat-icon>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

          <!-- Row shown when there is no matching data. -->
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell lyrics" colspan="7">Without results</td>
          </tr>
        </table>
      </div>

      <div [ngClass]="'lyrics'" [style]="{width: '90%', display: 'flex', justifyContent: 'start', fontSize: '1rem'}">
        <h2>Amount: {{totalAmount}}</h2>
      </div>
    </div>
  </div>
  <!-- MODAL DELETE PRODUCT -->
  <div *ngIf="isShowModalDeleteProduct" [ngClass]="'popUp'">
    <div [style]="'margin: 0 1em'">
      <h3 [ngStyle]="{'display': 'flex', 'justifyContent': 'end'}">
        <span (click)="closeDeleteProductModal()" [style]="{'cursor': 'pointer'}">X</span>
      </h3>
      <h3>Are you sure you want to remove this item from your list?</h3>
      <div [style]="{marginTop: '1.8rem', display: 'flex', justifyContent: 'space-evenly'}">
        <button [className]="'button-popUp'" (click)="deleteProduct()">YES</button>
        <button [className]="'button-popUp'" (click)="closeDeleteProductModal()">NO</button>
      </div>
    </div>
  </div>
  <!-- MODAL CLEAN LIST -->
  <div *ngIf="isShowModalCleanList" [ngClass]="'popUp'">
    <div [style]="'margin: 0 1em'">
      <h3 [ngStyle]="{'display': 'flex', 'justifyContent': 'end'}">
        <span (click)="closeCleanListModal()" [style]="{'cursor': 'pointer'}">X</span>
      </h3>
      <h3 [style]="{margin:'0'}">You are completed the list.</h3>
      <h3 [style]="{margin:'0'}">Do you want to reset it?</h3>
      <div [style]="{marginTop: '1.8rem', display: 'flex', justifyContent: 'space-evenly'}">
        <button [className]="'button-popUp'" (click)="cleanList()">YES</button>
        <button [className]="'button-popUp'" (click)="closeCleanListModal()">NO</button>
      </div>
    </div>
  </div>
  <!-- MODAL PRODUCT DETAIL -->
  <div *ngIf="isShowModalProductDetails" [ngClass]="'product-details'">
    <div [style]="'margin: 0 1em'">
      <h3 [ngStyle]="{'display': 'flex', 'justifyContent': 'end'}">
        <span [style]="{'cursor': 'pointer'}" (click)="closeProductDetailsModal()">X</span>
      </h3>
      <div [style]="{ display: 'flex', height: '19.5rem'}">
        <div [style]="{width: '17rem'}">
          <div
            [style]="{marginLeft: '1rem', backgroundImage: 'url(./../../../../../../assets/img-product.jpeg)', border: '1px #707070 solid', width: '13rem', height: '13rem', borderRadius: '1rem'}">
          </div>
        </div>
        <div [style]="{width: '13rem', fontWight: 'bold'}">
          <div>
            <h2 [style]="{marginTop: '0'}">{{itemSelect?.name}}</h2>
          </div>
          <div [style]="{marginTop: '1.8rem'}">
            <h3>
              Brand:
              <span [style]="{fontSize: '1rem'}">{{itemSelect?.brand}}</span>
            </h3>
          </div>
          <div [style]="{marginTop: '1.8rem'}">
            <h3>
              Format:
              <span [style]="{fontSize: '1rem'}">{{itemSelect?.formatSize}}</span>
            </h3>
          </div>
          <div [style]="{marginTop: '1.8rem'}">
            <h3>
              Price:
              <span [style]="{fontSize: '1rem'}">{{itemSelect?.price}}</span>
            </h3>
          </div>
          <div [style]="{marginTop: '1.8rem'}">
            <h3>
              Category:
              <span [style]="{fontSize: '1rem'}">{{itemSelect?.category}}</span>
            </h3>
          </div>
        </div>
      </div>
      <div [style]="{display: 'flex', justifyContent: 'center'}">
        <div [style]="{display: 'flex', justifyContent: 'space-between'}">
          <button (click)="sumUnit()" [className]="'button-add'" [style]="{marginRight: '1.2rem'}">+</button>
          <div [className]="'input-units'">{{itemSelect?.units}}</div>
          <button  [disabled]="itemSelect!.units! <= 1" (click)="restUnit()"  
          [ngClass]="itemSelect!.units! <= 1 ? 'button-rest-disable' : isHoverBtnRest ? 'button-rest-hover' : 'button-rest'"
          (mouseover)="isHoverBtnRest=true"
          (mouseleave)="isHoverBtnRest=false"
          [style]="{marginLeft: '1.2rem'}">-</button>
        </div>
      </div>
    </div>
  </div>
</div>
